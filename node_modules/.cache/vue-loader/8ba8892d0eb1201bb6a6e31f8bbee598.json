{"remainingRequest":"/Users/wujian/2019项目/bss3/ued/big-screen/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wujian/2019项目/bss3/ued/big-screen/src/components/pageCutOver.vue?vue&type=style&index=0&lang=scss&module=true&","dependencies":[{"path":"/Users/wujian/2019项目/bss3/ued/big-screen/src/components/pageCutOver.vue","mtime":1564995502884},{"path":"/Users/wujian/2019项目/bss3/ued/big-screen/node_modules/css-loader/index.js","mtime":1563933943836},{"path":"/Users/wujian/2019项目/bss3/ued/big-screen/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1564995542110},{"path":"/Users/wujian/2019项目/bss3/ued/big-screen/node_modules/postcss-loader/src/index.js","mtime":1563933937462},{"path":"/Users/wujian/2019项目/bss3/ued/big-screen/node_modules/sass-loader/lib/loader.js","mtime":1563933939739},{"path":"/Users/wujian/2019项目/bss3/ued/big-screen/node_modules/cache-loader/dist/cjs.js","mtime":1564995541627},{"path":"/Users/wujian/2019项目/bss3/ued/big-screen/node_modules/vue-loader/lib/index.js","mtime":1564995542110}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.wrap {\n  flex: 1;\n  display: flex;\n  padding: 0 rem(40);\n}\n.colProgress{\n  width: rem(420);\n}\n.colOrder{\n  width: rem(520);\n}\n.colChart {\n  margin: 0 rem(60);\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  .colChartMain {\n    margin: 0 auto;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: rem(560);\n    height: rem(560);\n    position: relative;\n    .chartCont{\n      width: rem(400);\n      height: rem(400);\n      background: url('../assets/images/pic/pic-bg.png') no-repeat center;\n      background-size: cover;\n      border-radius: rem(200);\n      position: relative;\n      z-index: 3;\n    }\n    &:before{\n      content: '';\n      background: url('../assets/images/pic/pic-line1.png') no-repeat;\n      background-size: cover;\n      display: block;\n      width: rem(500);\n      height: rem(500);\n      margin: rem(-250) 0 0 rem(-250);\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      z-index: 1;\n      animation: rotateMove infinite linear 12s;\n    }\n    &:after{\n      content: '';\n      background: url('../assets/images/pic/pic-line2.png') no-repeat;\n      background-size: cover;\n      display: block;\n      width: rem(560);\n      height: rem(560);\n      margin: rem(-280) 0 0 rem(-280);\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      z-index: 2;\n      animation: backRotateMove infinite linear 8s;\n    }\n    @keyframes rotateMove {\n      0%{\n          transform:rotate(0deg);\n      }\n      100%{\n          transform:rotate(360deg);\n      }\n    }\n    @keyframes backRotateMove {\n      0%{\n          transform:rotate(0deg);\n      }\n      100%{\n          transform:rotate(-360deg);\n      }\n    }\n  }\n  .colChartGroup {\n    padding-top: rem(60);\n  }\n  .colChartFooter{\n    padding: rem(30);\n    img{\n      display: block;\n      margin: 0 auto;\n      height: rem(50);\n    }\n  }\n}\n",{"version":3,"sources":["pageCutOver.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pageCutOver.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div :class=\"$style.wrap\">\n    <LineProgress\n      :appData=\"appData\"\n      :className=\"$style.colProgress\"\n    />\n    <div :class=\"$style.colChart\">\n      <div :class=\"$style.colChartMain\">\n        <div :class=\"$style.chartCont\">\n          <PieChart\n            :ratio=\"totalProgress\"\n            :ratioSize=\"90\"\n            title=\"总体进度\"\n            color=\"#FFD300\"\n          />\n        </div>\n      </div>\n      <PieChartGroup\n        :data=\"stepData\"\n        :className=\"$style.colChartGroup\"\n      />\n    </div>\n    <OrderList\n      :data=\"commandData\"\n      :class=\"$style.colOrder\"\n    />\n  </div>\n</template>\n\n<script>\nimport LineProgress from \"./lineProgress\";\nimport OrderList from \"./orderList\";\nimport PieChart from \"./pieChart\";\nimport PieChartGroup from \"./pieChartGroup\";\nimport api from \"../services\";\n\nexport default {\n  name: \"pageCutOver\",\n  components: {\n    LineProgress,\n    OrderList,\n    PieChart,\n    PieChartGroup\n  },\n  data() {\n    return {\n      initAppCount : 0,\n      commandData1: [],\n      commandData: [],\n      stepData: [  //4个环节数据\n        {stepid: \"GJQD\",stepname: \"割接启动\",ratio:0, overno:0, totalno:0},\n        {stepid: \"SHGJ\",stepname: \"数据割接\",ratio:0, overno:0, totalno:0},\n        {stepid: \"YYFB\",stepname: \"应用发布\",ratio:0, overno:0, totalno:0},\n        {stepid: \"XTYZ\",stepname: \"系统验证\",ratio:0, overno:0, totalno:0}\n      ],\n      appData: [\n         { appkey: \"gx_fixprice\",  color: \"#FFDC4F\" },\n         { appkey: \"gx_account\",  color: \"#FF9F7B\" },\n         { appkey: \"gx_strategy\",  color: \"#E25FAF\" },\n         { appkey: \"gx_portal\",  color: \"#E88ED2\" },\n         { appkey: \"gx_cpc\",  color: \"#E8BBF3\" },\n         { appkey: \"gx_crm2\",  color: \"#9C93F8\" },\n         { appkey: \"gx_oss\",  color: \"#2FA1DC\" },\n         { appkey: \"gx_eda\",  color: \"#24C6EB\" },\n         { appkey: \"gx_other\",  color: \"#61E0E4\" },\n      ],\n      totalProgress: 0\n    };\n  },\n  mounted() {\n    this.getData();\n    setInterval(this.getData, 5000);\n  },\n  watch:{\n    initAppCount:function(value){\n      if(value === this.appData.length){\n        //1.已完成指令\n        this.commandData = this.commandData1;\n        this.commandData.sort(function(a, b) {\n          return Date.parse(b.end.replace(/-/g,\"/\"))-Date.parse(a.end.replace(/-/g,\"/\"));\n          });\n        this.commandData = this.commandData.slice(0,23);\n\n        //2.环节进度\n        let pagetotalno = 0;\n        let pageoverno = 0;\n        this.stepData.map((step) =>{\n          pagetotalno += step.totalno;\n          pageoverno += step.overno;\n          step.ratio = parseFloat((step.overno / step.totalno) * 100).toFixed(0);\n        });\n\n        //3.总进度\n        this.totalProgress = parseFloat((pageoverno / pagetotalno) * 100).toFixed(0);\n\n        //4.各中心进度\n        this.appData = this.appData.filter(function (item) {\n          return item.appname;\n        })\n      }\n    }\n  },\n  methods: {\n    getData() {\n      this.initData();\n      this.appData.map((app)=>{\n        this.getAppInfo(app);\n      });\n    },\n    initData(){\n      this.initAppCount = 0;\n      this.commandData1 = [];\n      this.stepData = [\n        {stepid: \"GJQD\",stepname: \"割接启动\",ratio:0, overno:0, totalno:0},\n        {stepid: \"SHGJ\",stepname: \"数据割接\",ratio:0, overno:0, totalno:0},\n        {stepid: \"YYFB\",stepname: \"应用发布\",ratio:0, overno:0, totalno:0},\n        {stepid: \"XTYZ\",stepname: \"系统验证\",ratio:0, overno:0, totalno:0}\n      ]\n    },\n    async getAppInfo(app) {\n      let ts = this;\n      return new Promise( async() => {\n        const appJson = await api.getOtherAppData(app.appkey);\n        let app_total_no = 0;\n        let app_over_no = 0;\n        appJson.steps.map((step,index)=>{\n          const { commands } = step;\n          let overno = 0;\n          let totalno = commands.length;\n          commands.map(command => {\n            const { end } = command;\n            if (this.compareT(end)) {\n              this.commandData1.push(command);\n              overno += 1;\n            }\n          });\n          app_total_no += totalno;\n          app_over_no += overno;\n          ts.stepData[index]['overno'] += overno;\n          ts.stepData[index]['totalno'] += totalno;\n        });\n        app.appname = appJson.appname;\n        app.ratio = parseFloat((app_over_no / app_total_no) * 100).toFixed(0);\n        this.initAppCount += 1;\n      });\n    },\n    compareT(end) {\n      if (end === \"\") {\n        return false;\n      }\n      return new Date(end) < new Date();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" module>\n.wrap {\n  flex: 1;\n  display: flex;\n  padding: 0 rem(40);\n}\n.colProgress{\n  width: rem(420);\n}\n.colOrder{\n  width: rem(520);\n}\n.colChart {\n  margin: 0 rem(60);\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  .colChartMain {\n    margin: 0 auto;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: rem(560);\n    height: rem(560);\n    position: relative;\n    .chartCont{\n      width: rem(400);\n      height: rem(400);\n      background: url('../assets/images/pic/pic-bg.png') no-repeat center;\n      background-size: cover;\n      border-radius: rem(200);\n      position: relative;\n      z-index: 3;\n    }\n    &:before{\n      content: '';\n      background: url('../assets/images/pic/pic-line1.png') no-repeat;\n      background-size: cover;\n      display: block;\n      width: rem(500);\n      height: rem(500);\n      margin: rem(-250) 0 0 rem(-250);\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      z-index: 1;\n      animation: rotateMove infinite linear 12s;\n    }\n    &:after{\n      content: '';\n      background: url('../assets/images/pic/pic-line2.png') no-repeat;\n      background-size: cover;\n      display: block;\n      width: rem(560);\n      height: rem(560);\n      margin: rem(-280) 0 0 rem(-280);\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      z-index: 2;\n      animation: backRotateMove infinite linear 8s;\n    }\n    @keyframes rotateMove {\n      0%{\n          transform:rotate(0deg);\n      }\n      100%{\n          transform:rotate(360deg);\n      }\n    }\n    @keyframes backRotateMove {\n      0%{\n          transform:rotate(0deg);\n      }\n      100%{\n          transform:rotate(-360deg);\n      }\n    }\n  }\n  .colChartGroup {\n    padding-top: rem(60);\n  }\n  .colChartFooter{\n    padding: rem(30);\n    img{\n      display: block;\n      margin: 0 auto;\n      height: rem(50);\n    }\n  }\n}\n</style>\n\n"]}]}